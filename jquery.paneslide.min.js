/*
 * jQuery paneSlide
 * Version 1.0
 * http://asheavenue.com/
 *
 * HEAVILY influenced by and based on jquery-pageslide
 * with gratitude to Scott Robbin
 * http://srobbin.com/jquery-pageslide/
 *
 * jQuery Javascript plugin that slides a pane in from the left or right.
 *
 * Copyright (c) 2013 Ashe Avenue. Created by Tim Boisvert
 * Dual licensed under the MIT and GPL licenses.
*/
(function(e){function i(n,r){if(n.indexOf("#")===0){e(n).clone(true).appendTo(t.empty()).show()}else{if(r){var i=e("<iframe />").attr({src:n,frameborder:0,hspace:0}).css({width:"100%",height:"100%"});t.html(i)}else{t.load(n)}t.data("localEl",false)}}function s(r,i,s){var o=t.outerWidth(true),u={},a={};if(t.is(":visible")||n)return;n=true;switch(r){case"right":t.css({left:"auto",right:"-"+o+"px"});u["right"]="+=0";if(s){a["margin-right"]=o}break;default:t.css({left:"-"+o+"px",right:"auto"});u["left"]="+=0";if(s){a["margin-left"]=o}break}if(s){e(s).animate(a,i)}t.show().animate(u,i,function(){n=false})}var t=e("#paneslide");var n=false,r;if(t.length==0){t=e("<div />").attr("id","paneslide").css("display","none").appendTo(e("body"))}e.fn.paneslide=function(n){var i=this;i.click(function(i){var s=e(this),o=e.extend({href:s.data("pane")},n);i.preventDefault();i.stopPropagation();if(t.is(":visible")&&s[0]==r){e.paneslide.close()}else{e.paneslide(o);r=s[0]}})};e.fn.paneslide.defaults={speed:200,position:"right",modal:true,iframe:false,href:null,maincontainer:null};e.paneslide=function(n){var r=e.extend({},e.fn.paneslide.defaults,n);if(t.is(":visible")&&t.data("position")!=r.position){e.paneslide.close(function(){i(r.href,r.iframe);s(r.position,r.speed,r.maincontainer)})}else{i(r.href,r.iframe);if(t.is(":hidden")){s(r.position,r.speed,r.maincontainer)}}t.data(r)};e.paneslide.close=function(t){var r=e("#paneslide"),i=r.outerWidth(true),s=r.data("speed"),o=r.data("maincontainer"),u={},a={};if(r.is(":hidden")||n)return;n=true;switch(r.data("position")){case"left":u["left"]="-="+i;if(o){a["margin-left"]="-=0"}break;default:u["right"]="-="+i;if(o){a["margin-right"]="-=0"}break}if(o){e(o).animate(a,s)}r.animate(u,s,function(){r.hide();n=false;if(typeof t!="undefined")t()})};t.click(function(e){e.stopPropagation()});e(document).bind("click keyup",function(n){if(n.type=="keyup"&&n.keyCode!=27)return;if(t.is(":visible")&&!t.data("modal")){e.paneslide.close()}})})(jQuery)